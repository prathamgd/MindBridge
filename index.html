<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindBridge - Student Mental Health Platform</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <style>
        :root {
            /* Light mode colors */
            --bg-gradient: linear-gradient(135deg, #F8F5F2 0%, #F1E6E4 100%);
            --app-bg: rgba(255, 255, 255, 0.1);
            --header-gradient: linear-gradient(135deg, #E89D9D, #D18A8A);
            --card-bg: rgba(239, 234, 228, 0.95);
            --modal-bg: rgba(239, 234, 228, 0.98);
            --input-bg: rgba(248, 245, 242, 0.9);
            --option-bg: rgba(248, 245, 242, 0.8);
            --nav-hover-bg: rgba(248, 245, 242, 0.95);
            --text-primary: #3E3E3E;
            --text-secondary: #5A5A5A;
            --text-light: #F8F5F2;
            --border-color: rgba(232, 157, 157, 0.3);
            --shadow-light: rgba(0,0,0,0.08);
            --shadow-medium: rgba(0,0,0,0.1);
            --shadow-strong: rgba(0,0,0,0.15);
            --primary-color: #E89D9D;
            --primary-dark: #D18A8A;
            --accent-bg: rgba(232, 157, 157, 0.1);
            --progress-bg: rgba(209, 209, 209, 0.3);
            --forum-border: rgba(209, 209, 209, 0.3);
            --author-bg: rgba(209, 209, 209, 0.8);
        }

        [data-theme="dark"] {
            /* Dark mode colors */
            --bg-gradient: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            --app-bg: rgba(45, 45, 45, 0.2);
            --header-gradient: linear-gradient(135deg, #B87D7D, #A66B6B);
            --card-bg: rgba(60, 60, 60, 0.95);
            --modal-bg: rgba(50, 50, 50, 0.98);
            --input-bg: rgba(70, 70, 70, 0.9);
            --option-bg: rgba(80, 80, 80, 0.8);
            --nav-hover-bg: rgba(70, 70, 70, 0.95);
            --text-primary: #E0E0E0;
            --text-secondary: #B0B0B0;
            --text-light: #F8F5F2;
            --border-color: rgba(184, 125, 125, 0.3);
            --shadow-light: rgba(0,0,0,0.2);
            --shadow-medium: rgba(0,0,0,0.3);
            --shadow-strong: rgba(0,0,0,0.4);
            --primary-color: #B87D7D;
            --primary-dark: #A66B6B;
            --accent-bg: rgba(184, 125, 125, 0.2);
            --progress-bg: rgba(100, 100, 100, 0.3);
            --forum-border: rgba(120, 120, 120, 0.3);
            --author-bg: rgba(100, 100, 100, 0.8);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            color: var(--text-secondary);
            display: flex;
            flex-direction: column;
        }

        .app-container {
            max-width: 1600px; 
            margin: 10px auto;
            width: calc(100% - 20px); 
            background: var(--app-bg);
            backdrop-filter: blur(10px);
            position: relative;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            border-radius: 20px;
            box-shadow: 0 8px 32px var(--shadow-light);
        }

        /* Header */
        .header {
            background: var(--header-gradient);
            color: var(--text-light); 
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px var(--shadow-medium);
            border-radius: 20px 20px 0 0;
            flex-shrink: 0;
            position: relative;
        }

        .theme-toggle {
            background: rgba(248, 245, 242, 0.2);
            border: 2px solid rgba(248, 245, 242, 0.3);
            border-radius: 50px;
            padding: 0.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            margin-left: 2rem;
        }

        .theme-toggle:hover {
            background: rgba(248, 245, 242, 0.3);
            transform: scale(1.05);
        }

        .theme-icon {
            font-size: 1.2rem;
            color: var(--text-light);
            transition: opacity 0.3s ease;
        }

        .theme-icon.hidden {
            opacity: 0.3;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-img {
            height: 60px;
            width: auto;
            filter: invert(1) brightness(1.1);
            transition: transform 0.3s ease;
        }
        
        .logo-img:hover {
            transform: scale(1.05);
        }
        
        .logo-text {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-light);
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .nav-menu {
            display: flex;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem;
            border-radius: 25px;
            backdrop-filter: blur(10px);
        }

        .nav-btn {
            background: transparent;
            border: 2px solid transparent;
            color: var(--text-light);
            padding: 0.75rem 1.5rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Quicksand', sans-serif;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        .nav-btn:hover::before {
            left: 100%;
        }

        .nav-btn:hover, .nav-btn.active {
            background: var(--nav-hover-bg);
            color: var(--primary-color);
            border-color: rgba(248, 245, 242, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(248, 245, 242, 0.3);
        }

        /* Main Content Area */
        .main-content {
            padding: 2.5rem;
            flex-grow: 1;
            overflow-y: auto;
        }

        .screen {
            display: none;
            animation: slideIn 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .screen.active {
            display: block;
        }

        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateY(30px) scale(0.95);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }

        /* --- Welcome Screen --- */
        .welcome-card {
            text-align: center;
            max-width: 650px;
            margin: 3rem auto;
            padding: 4rem 3rem;
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            box-shadow: 0 25px 50px var(--shadow-medium);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }
        .welcome-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, var(--accent-bg) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-20px, -20px) rotate(180deg); }
        }
        .welcome-icon {
            font-size: 5rem;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
            animation: pulse 2s ease-in-out infinite;
            position: relative;
            z-index: 1;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .welcome-title {
            font-size: 3rem;
            background: linear-gradient(135deg, var(--text-primary), var(--text-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.5rem;
            font-weight: 700;
            position: relative;
            z-index: 1;
        }
        .welcome-subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 2.5rem;
            line-height: 1.7;
            position: relative;
            z-index: 1;
        }
        .privacy-notice {
            background: var(--option-bg);
            border: 2px solid var(--border-color);
            border-radius: 15px;
            padding: 1.5rem;
            margin: 2.5rem 0;
            text-align: left;
            backdrop-filter: blur(10px);
            position: relative;
            z-index: 1;
        }
        .privacy-notice h4 {
            color: var(--text-primary); 
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .cta-button {
            background: var(--header-gradient);
            color: var(--text-light);
            border: none;
            padding: 1.2rem 2.5rem;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 8px 25px rgba(232, 157, 157, 0.4);
            font-family: 'Quicksand', sans-serif;
            position: relative;
            z-index: 1;
            overflow: hidden;
        }
        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s ease;
        }
        .cta-button:hover::before {
            left: 100%;
        }
        .cta-button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 35px rgba(232, 157, 157, 0.6);
        }

        /* --- Assessment Screen --- */
        .assessment-container { max-width: 750px; margin: 0 auto; }
        .progress-bar { width: 100%; height: 12px; background: var(--progress-bg); border-radius: 6px; margin-bottom: 3rem; overflow: hidden; backdrop-filter: blur(10px); }
        .progress-fill { height: 100%; background: var(--header-gradient); transition: width 0.5s ease; border-radius: 6px; }
        .question-card { background: var(--card-bg); backdrop-filter: blur(20px); border-radius: 25px; padding: 3rem; margin-bottom: 2rem; box-shadow: 0 15px 40px var(--shadow-medium); border-left: 6px solid var(--primary-color); border: 1px solid rgba(255, 255, 255, 0.2); }
        .question-number { color: var(--primary-color); font-size: 1rem; font-weight: 700; margin-bottom: 1rem; text-transform: uppercase; letter-spacing: 1px; }
        .question-text { font-size: 1.4rem; color: var(--text-primary); margin-bottom: 2.5rem; line-height: 1.6; font-weight: 500; }
        .options-container { display: flex; flex-direction: column; gap: 1rem; }
        .option { background: var(--option-bg); border: 2px solid var(--border-color); border-radius: 15px; padding: 1.2rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; backdrop-filter: blur(10px); position: relative; overflow: hidden; color: var(--text-primary); }
        .option::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, var(--accent-bg), transparent); transition: left 0.4s ease; }
        .option:hover::before { left: 100%; }
        .option:hover { background: var(--card-bg); border-color: var(--primary-color); transform: translateX(5px); }
        .option.selected { background: var(--accent-bg); border-color: var(--primary-color); color: var(--text-primary); transform: scale(1.02); }
        .option-radio { margin-right: 1rem; width: 18px; height: 18px; pointer-events: none; }
        .assessment-nav { display: flex; justify-content: space-between; margin-top: 3rem; }
        .nav-button { background: var(--author-bg); color: var(--text-primary); border: 2px solid transparent; padding: 1rem 2rem; border-radius: 25px; cursor: pointer; font-weight: 700; transition: all 0.3s ease; font-family: 'Quicksand', sans-serif; backdrop-filter: blur(10px); }
        .nav-button:disabled { opacity: 0.5; cursor: not-allowed; }
        .nav-button:hover:not(:disabled) { background: var(--input-bg); transform: translateY(-2px); }
        .nav-button.primary { background: var(--header-gradient); color: var(--text-light); }
        .nav-button.primary:hover:not(:disabled) { transform: translateY(-3px) scale(1.05); box-shadow: 0 8px 25px rgba(232, 157, 157, 0.4); }

        /* --- Dashboard --- */
        .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 2.5rem; margin-bottom: 2rem; }
        .dashboard-card { background: var(--card-bg); backdrop-filter: blur(20px); border-radius: 20px; padding: 2rem; box-shadow: 0 15px 35px var(--shadow-light); border-top: 5px solid var(--primary-color); border: 1px solid rgba(255, 255, 255, 0.2); transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .dashboard-card:hover { transform: translateY(-5px); box-shadow: 0 25px 50px var(--shadow-strong); }
        .card-header { display: flex; align-items: center; margin-bottom: 1.5rem; }
        .card-icon { font-size: 1.8rem; margin-right: 1rem; color: var(--primary-color); background: var(--accent-bg); padding: 0.5rem; border-radius: 10px; }
        .card-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); }
        .mood-tracker { display: flex; justify-content: space-between; margin: 1.5rem 0; gap: 0.5rem; }
        .mood-option { text-align: center; cursor: pointer; padding: 1rem 0.5rem; border-radius: 15px; transition: all 0.3s ease; flex: 1; background: var(--option-bg); color: var(--text-primary); }
        .mood-option:hover { background: var(--accent-bg); transform: translateY(-2px); }
        .mood-option.selected { background: var(--accent-bg); transform: scale(1.05); border: 2px solid var(--primary-color); }
        .mood-emoji { font-size: 2.2rem; display: block; margin-bottom: 0.5rem; }
        .quick-actions { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
        .action-btn { background: var(--option-bg); color: var(--primary-color); border: 2px solid var(--border-color); padding: 1.2rem 1rem; border-radius: 15px; cursor: pointer; font-weight: 700; transition: all 0.3s ease; font-family: 'Quicksand', sans-serif; text-align: center; backdrop-filter: blur(10px); }
        .action-btn:hover { background: var(--accent-bg); color: var(--text-primary); transform: translateY(-3px); box-shadow: 0 8px 20px var(--shadow-light); }

        /* --- Content Library --- */
        .content-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 2rem; }
        .content-card { background: var(--card-bg); backdrop-filter: blur(20px); border-radius: 20px; overflow: hidden; box-shadow: 0 15px 35px var(--shadow-light); transition: all 0.4s ease; cursor: pointer; border: 1px solid rgba(255, 255, 255, 0.2); }
        .content-card:hover { transform: translateY(-8px) scale(1.02); box-shadow: 0 25px 50px var(--shadow-strong); }
        .content-thumbnail { height: 180px; background: var(--header-gradient); display: flex; align-items: center; justify-content: center; font-size: 3.5rem; color: var(--text-light); position: relative; overflow: hidden; }
        .content-thumbnail::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.6s ease; }
        .content-card:hover .content-thumbnail::before { left: 100%; }
        .content-info { padding: 2rem; }
        .content-title { font-size: 1.2rem; font-weight: 700; margin-bottom: 0.8rem; color: var(--text-primary); }
        .content-description { color: var(--text-secondary); font-size: 1rem; line-height: 1.5; margin-bottom: 1.5rem; }
        .content-meta { display: flex; justify-content: space-between; align-items: center; font-size: 0.9rem; color: var(--text-secondary); padding-top: 1rem; border-top: 1px solid var(--forum-border); }

        /* --- Community Forum & Generic Header --- */
        .page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 3rem; }
        .new-post-btn { background: var(--header-gradient); color: var(--text-light); border: none; padding: 1rem 2rem; border-radius: 25px; cursor: pointer; font-weight: 700; transition: all 0.3s ease; font-family: 'Quicksand', sans-serif; }
        .new-post-btn:hover { transform: translateY(-3px) scale(1.05); box-shadow: 0 8px 25px rgba(232, 157, 157, 0.4); }
        .forum-post { background: var(--card-bg); backdrop-filter: blur(20px); border-radius: 20px; padding: 2rem; margin-bottom: 1.5rem; box-shadow: 0 10px 25px var(--shadow-light); border-left: 5px solid var(--primary-color); border: 1px solid rgba(255, 255, 255, 0.2); transition: transform 0.3s ease; }
        .forum-post:hover { transform: translateX(5px); }
        .post-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.2rem; }
        .post-author { display: flex; align-items: center; gap: 0.8rem; font-weight: 600; color: var(--text-primary); }
        .author-avatar { width: 45px; height: 45px; border-radius: 50%; background: var(--header-gradient); display: flex; align-items: center; justify-content: center; color: var(--text-light); font-weight: 700; font-size: 1.1rem; }
        .post-content { line-height: 1.7; margin-bottom: 1.5rem; font-weight: 500; font-size: 1.05rem; color: var(--text-primary); }
        .post-actions { display: flex; gap: 2rem; color: var(--text-secondary); font-size: 1rem; font-weight: 600; }
        .post-action { cursor: pointer; display: flex; align-items: center; gap: 0.5rem; transition: all 0.3s ease; padding: 0.5rem 1rem; border-radius: 10px; }
        .post-action:hover { color: var(--primary-color); background: var(--accent-bg); }
        
        /* --- Journal Screen --- */
        .journal-entry {
            background: var(--card-bg);
            border-left: 5px solid var(--primary-color);
            border-radius: 15px;
            padding: 1.5rem 2rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 8px 20px var(--shadow-light);
        }
        .journal-date {
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.8rem;
        }
        .journal-text {
            white-space: pre-wrap; /* preserves line breaks */
            line-height: 1.6;
            color: var(--text-primary);
        }
        #journalEntriesContainer p {
            font-size: 1.2rem;
            text-align: center;
            margin-top: 3rem;
            color: var(--text-secondary);
        }
        
        /* --- Counselors Screen --- */
        .counselors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 2rem;
        }
        .counselor-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 10px 30px var(--shadow-light);
            transition: all 0.3s ease;
        }
        .counselor-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px var(--shadow-strong);
        }
        .counselor-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: var(--header-gradient);
            margin: 0 auto 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--text-light);
            box-shadow: 0 5px 15px var(--shadow-medium);
        }
        .counselor-name {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }
        .counselor-specialty {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 1.5rem;
        }
        .counselor-bio {
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        /* --- Floating AI Chat Widget --- */
        .chat-fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            background: var(--header-gradient);
            color: var(--text-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            z-index: 999;
            transition: all 0.3s ease;
        }
        .chat-fab:hover {
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 12px 30px rgba(0,0,0,0.3);
        }
        .chat-widget {
            position: fixed;
            bottom: 6.5rem;
            right: 2rem;
            width: 380px;
            height: 70vh;
            max-height: 550px;
            display: flex;
            flex-direction: column;
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            box-shadow: 0 20px 40px var(--shadow-medium);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 998;
            transform-origin: bottom right;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.3s ease;
            transform: scale(0.5);
            opacity: 0;
            pointer-events: none;
        }
        .chat-widget.active {
            transform: scale(1);
            opacity: 1;
            pointer-events: auto;
        }
        .chat-header {
            background: var(--header-gradient);
            color: var(--text-light);
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            font-weight: 600;
            flex-shrink: 0;
        }
        .chat-header i { font-size: 1.5rem; }
        .chat-messages { flex: 1; padding: 1.5rem; overflow-y: auto; display: flex; flex-direction: column; gap: 1.2rem; }
        .message { max-width: 80%; padding: 1rem 1.2rem; border-radius: 20px; line-height: 1.5; animation: messageSlide 0.4s ease-out; font-size: 0.95rem; }
        @keyframes messageSlide { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .message.bot { background: var(--option-bg); color: var(--text-primary); align-self: flex-start; border-bottom-left-radius: 5px; border: 1px solid var(--border-color); }
        .message.user { background: var(--header-gradient); color: var(--text-light); align-self: flex-end; border-bottom-right-radius: 5px; }
        .chat-input-container { padding: 1rem; border-top: 2px solid var(--border-color); display: flex; gap: 0.5rem; background: var(--option-bg); }
        .chat-input { flex: 1; border: 2px solid var(--border-color); background: var(--input-bg); border-radius: 25px; padding: 0.8rem 1.2rem; font-size: 1rem; outline: none; transition: all 0.3s ease; font-family: 'Quicksand', sans-serif; color: var(--text-primary); }
        .chat-input:focus { border-color: var(--primary-color); box-shadow: 0 0 0 3px var(--accent-bg); }
        .send-btn { background: var(--header-gradient); color: var(--text-light); border: none; border-radius: 50%; width: 45px; height: 45px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; font-size: 1.2rem; flex-shrink: 0; }
        .send-btn:hover { transform: scale(1.1); box-shadow: 0 5px 15px rgba(232, 157, 157, 0.4); }

        /* --- Modal Styles --- */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; z-index: 1000; animation: fadeIn 0.3s ease; backdrop-filter: blur(5px); }
        .modal-content { background: var(--modal-bg); backdrop-filter: blur(20px); padding: 2.5rem; border-radius: 20px; box-shadow: 0 25px 50px var(--shadow-medium); max-width: 90%; width: 500px; text-align: center; border: 1px solid rgba(255, 255, 255, 0.2); }
        .modal-title { font-size: 1.6rem; color: var(--text-primary); margin-bottom: 1.2rem; font-weight: 700; }
        .modal-message { color: var(--text-secondary); margin-bottom: 2rem; line-height: 1.6; font-size: 1.05rem; }
        .modal-actions { display: flex; justify-content: center; gap: 1rem; }
        .modal-textarea { width: 100%; min-height: 120px; border: 2px solid var(--border-color); border-radius: 15px; padding: 1rem; font-size: 1rem; margin-bottom: 1.5rem; font-family: 'Quicksand', sans-serif; background: var(--input-bg); transition: border-color 0.3s ease; color: var(--text-primary); }
        .modal-textarea:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px var(--accent-bg); }

        /* --- Responsive Design --- */
        @media (max-width: 768px) {
            .app-container { margin: 5px; border-radius: 15px; width: calc(100% - 10px); }
            .header { flex-direction: column; gap: 1.5rem; padding: 1.2rem; border-radius: 15px 15px 0 0; }
            .theme-toggle { margin-left: 0; align-self: flex-end; order: -1; }
            .main-content { padding: 1.5rem; }
            .nav-menu { flex-wrap: wrap; justify-content: center; gap: 0.3rem; padding: 0.3rem; }
            .nav-btn { padding: 0.6rem 1rem; font-size: 0.9rem; }
            .dashboard-grid, .counselors-grid { grid-template-columns: 1fr; gap: 1.5rem; }
            .quick-actions { grid-template-columns: 1fr; }
            .welcome-card { margin: 1.5rem auto; padding: 2.5rem 2rem; }
            .welcome-title { font-size: 2.2rem; }
            .content-grid { grid-template-columns: 1fr; }
            .modal-content { width: 95%; padding: 2rem; }
            .chat-widget { width: calc(100% - 2rem); right: 1rem; bottom: 5.5rem;}
            .chat-fab { right: 1rem; bottom: 1rem; }
        }

        /* --- Utility & Overrides --- */
        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .mb-2 { margin-bottom: 2rem; }
        .mt-2 { margin-top: 2rem; }
        #wellnessScore { color: var(--primary-color) !important; text-shadow: 0 2px 4px rgba(232, 157, 157, 0.3); }
        .forum-post .post-header span { background: var(--author-bg); color: var(--text-primary); padding: 0.4rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 600; backdrop-filter: blur(10px); }
        .gradient-text { background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        /* --- Scrollbar Styling --- */
        .chat-messages::-webkit-scrollbar, .main-content::-webkit-scrollbar { width: 6px; }
        .chat-messages::-webkit-scrollbar-track, .main-content::-webkit-scrollbar-track { background: var(--progress-bg); border-radius: 3px; }
        .chat-messages::-webkit-scrollbar-thumb, .main-content::-webkit-scrollbar-thumb { background: var(--primary-color); border-radius: 3px; }
        .chat-messages::-webkit-scrollbar-thumb:hover, .main-content::-webkit-scrollbar-thumb:hover { background: var(--primary-dark); }

        /* --- Loading Animation --- */
        .loading-dots { display: inline-block; position: relative; width: 40px; height: 10px; }
        .loading-dots div { position: absolute; top: 0; width: 6px; height: 6px; border-radius: 50%; background: var(--primary-color); animation: loadingDots 1.2s linear infinite; }
        .loading-dots div:nth-child(1) { left: 4px; animation-delay: -0.24s; }
        .loading-dots div:nth-child(2) { left: 16px; animation-delay: -0.12s; }
        .loading-dots div:nth-child(3) { left: 28px; animation-delay: 0; }
        @keyframes loadingDots { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
    </style>
</head>
<body>
    <div class="app-container">
        <header class="header">
            <div class="theme-toggle" onclick="toggleTheme()" id="themeToggle" title="Toggle Dark Mode">
                <i class="bi bi-sun-fill theme-icon" id="sunIcon"></i>
                <i class="bi bi-moon-fill theme-icon hidden" id="moonIcon"></i>
            </div>
            <div class="logo">
                <img src="https://raw.githubusercontent.com/prathamgd/SIH-PS2/main/Untitled%20design%20(4).png" alt="MindBridge Logo" class="logo-img">
                <span class="logo-text">MindBridge</span>
            </div>
            <nav class="nav-menu">
                <button class="nav-btn active" onclick="showScreen('welcome', event)"><i class="bi bi-house-door-fill"></i> Home</button>
                <button class="nav-btn" onclick="showScreen('dashboard', event)"><i class="bi bi-grid-1x2-fill"></i> Dashboard</button>
                <button class="nav-btn" onclick="showScreen('journal', event)"><i class="bi bi-journal-richtext"></i> Journal</button>
                <button class="nav-btn" onclick="showScreen('content', event)"><i class="bi bi-book-fill"></i> Resources</button>
                <button class="nav-btn" onclick="showScreen('counselors', event)"><i class="bi bi-person-video3"></i> Counselors</button>
                <button class="nav-btn" onclick="showScreen('community', event)"><i class="bi bi-people-fill"></i> Community</button>
            </nav>
        </header>

        <main class="main-content">
            <div id="welcome" class="screen active">
                <div class="welcome-card">
                    <div class="welcome-icon"><i class="bi bi-flower1"></i></div>
                    <h1 class="welcome-title">Welcome to MindBridge</h1>
                    <p class="welcome-subtitle">A safe, anonymous, and supportive platform for Indian students to prioritize their mental wellness.</p>
                    <div class="privacy-notice">
                        <h4><i class="bi bi-shield-lock-fill"></i> Your Privacy is Our Priority</h4>
                        <p>Your data is completely anonymous and encrypted. Your journal entries are stored only in your browser. No one else can see your data.</p>
                    </div>
                    <button class="cta-button" onclick="showScreen('assessment', event)">
                        Start Your Wellness Journey
                    </button>
                </div>
            </div>
            
            <div id="assessment" class="screen">
                <div class="assessment-container">
                    <div class="progress-bar"><div id="progressFill" class="progress-fill"></div></div>
                    <div id="questionCard" class="question-card"></div>
                </div>
            </div>

            <div id="dashboard" class="screen">
                <h2 class="welcome-title text-center mb-2 gradient-text">Your Personal Dashboard</h2>
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header"><i class="bi bi-heart-pulse-fill card-icon"></i><span class="card-title">Wellness Score</span></div>
                        <div style="text-align: center; margin: 1.5rem 0;">
                            <div id="wellnessScore" style="font-size: 3rem; font-weight: bold;">--/27</div>
                            <div id="wellnessMessage" style="color: var(--text-secondary); font-size: 1.05rem;">Complete the assessment to see your score.</div>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-header"><i class="bi bi-emoji-smile card-icon"></i><span class="card-title">Daily Mood Check</span></div>
                        <div class="mood-tracker">
                            <div class="mood-option" onclick="selectMood(this, 1)"> <span class="mood-emoji">üò¢</span> <div>Poor</div> </div>
                            <div class="mood-option" onclick="selectMood(this, 2)"> <span class="mood-emoji">üòü</span> <div>Low</div> </div>
                            <div class="mood-option" onclick="selectMood(this, 3)"> <span class="mood-emoji">üòê</span> <div>Okay</div> </div>
                            <div class="mood-option" onclick="selectMood(this, 4)"> <span class="mood-emoji">üòä</span> <div>Good</div> </div>
                            <div class="mood-option" onclick="selectMood(this, 5)"> <span class="mood-emoji">üòÑ</span> <div>Great</div> </div>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <div class="card-header"><i class="bi bi-magic card-icon"></i><span class="card-title">Quick Actions</span></div>
                        <div class="quick-actions">
                            <button class="action-btn" onclick="showScreen('content', event)">Browse Resources</button>
                            <button class="action-btn" onclick="showScreen('journal', event)">Write in Journal</button>
                            <button class="action-btn" onclick="showScreen('community', event)">Join Discussion</button>
                            <button class="action-btn" onclick="showScreen('counselors', event)">Find a Counselor</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="journal" class="screen">
                <div class="page-header">
                    <h2 class="welcome-title gradient-text">Your Private Journal</h2>
                    <button class="new-post-btn" onclick="addNewJournalEntry()"><i class="bi bi-plus-circle"></i> New Entry</button>
                </div>
                <div id="journalEntriesContainer">
                    </div>
            </div>
            
            <div id="content" class="screen">
                <h2 class="welcome-title text-center mb-2 gradient-text">Guided Resources & Exercises</h2>
                <div class="content-grid" id="contentGrid">
                    </div>
            </div>
            
            <div id="counselors" class="screen">
                <h2 class="welcome-title text-center mb-2 gradient-text">Connect with a Professional</h2>
                <div class="counselors-grid" id="counselorsGrid">
                     </div>
            </div>

            <div id="community" class="screen">
                <div class="page-header">
                    <h2 class="welcome-title gradient-text">Anonymous Support Community</h2>
                    <button class="new-post-btn" onclick="createNewPost()"><i class="bi bi-plus-circle"></i> New Post</button>
                </div>
                <div class="forum-post">
                    <div class="post-header"><div class="post-author"><div class="author-avatar">A</div><div><div>Anonymous_47</div><div style="font-size: 0.9rem; font-weight: 500; color: var(--text-secondary);">2 hours ago</div></div></div><span>Exam Stress</span></div>
                    <div class="post-content">I have my final exams starting next week and I'm feeling overwhelmed. I've been studying but I keep thinking I'm not prepared enough. Anyone else going through something similar?</div>
                    <div class="post-actions"><span class="post-action"><i class="bi bi-hand-thumbs-up"></i> 24</span><span class="post-action"><i class="bi bi-chat-dots"></i> 15</span><span class="post-action"><i class="bi bi-share"></i> Share</span></div>
                </div>
                <div class="forum-post">
                    <div class="post-header"><div class="post-author"><div class="author-avatar">S</div><div><div>Sunshine_23</div><div style="font-size: 0.9rem; font-weight: 500; color: var(--text-secondary);">5 hours ago</div></div></div><span>Success Story</span></div>
                    <div class="post-content">Just wanted to share that I finally talked to my parents about my struggles with anxiety. They were much more understanding than I expected! Sometimes the conversations we dread the most are the ones we need the most. üíô</div>
                    <div class="post-actions"><span class="post-action"><i class="bi bi-hand-thumbs-up"></i> 51</span><span class="post-action"><i class="bi bi-chat-dots"></i> 8</span><span class="post-action"><i class="bi bi-share"></i> Share</span></div>
                </div>
            </div>

        </main>
    </div>

    <div class="chat-fab" onclick="toggleChatWidget()" title="Talk to AI Assistant">
        <i class="bi bi-chat-heart-fill"></i>
    </div>
    <div id="chatWidget" class="chat-widget">
        <div class="chat-header">
            <i class="bi bi-chat-heart"></i>
            <div>
                <div>MindBridge AI Assistant</div>
                <div style="font-size: 0.9rem; opacity: 0.9; font-weight: 500;">Always here to listen</div>
            </div>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="message bot">Hi there! I'm your MindBridge AI companion. How are you feeling today?</div>
        </div>
        <div class="chat-input-container">
            <input type="text" class="chat-input" id="chatInput" placeholder="Type your message..." onkeypress="handleChatKeyPress(event)">
            <button class="send-btn" onclick="sendMessage()"><i class="bi bi-arrow-right"></i></button>
        </div>
    </div>


    <div id="customModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 id="modalTitle" class="modal-title">Notification</h3>
            <p id="modalMessage" class="modal-message"></p>
            <div class="modal-actions"><button id="modalOkButton" class="cta-button">OK</button></div>
        </div>
    </div>
    <div id="customPrompt" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 id="promptTitle" class="modal-title">Input Required</h3>
            <p id="promptMessage" class="modal-message"></p>
            <textarea id="promptInput" class="modal-textarea" placeholder="Share your thoughts..."></textarea>
            <div class="modal-actions">
                <button id="promptCancelButton" class="nav-button">Cancel</button>
                <button id="promptOkButton" class="cta-button">Submit</button>
            </div>
        </div>
    </div>

    <script>
        // --- THEME MANAGEMENT ---
        function toggleTheme() {
            const html = document.documentElement;
            const sunIcon = document.getElementById('sunIcon');
            const moonIcon = document.getElementById('moonIcon');
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            if (newTheme === 'dark') {
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            } else {
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            }
            localStorage.setItem('theme', newTheme);
        }

        function initializeTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            const html = document.documentElement;
            const sunIcon = document.getElementById('sunIcon');
            const moonIcon = document.getElementById('moonIcon');
            html.setAttribute('data-theme', savedTheme);
            if (savedTheme === 'dark') {
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            } else {
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            }
        }

        // --- DATA & STATE ---
        let currentQuestion = 0;
        let assessmentAnswers = new Array(9).fill(undefined);
        let journalEntries = [];

        const questions = [ { text: "Little interest or pleasure in doing things?" }, { text: "Feeling down, depressed, or hopeless?" }, { text: "Trouble falling/staying asleep, or sleeping too much?" }, { text: "Feeling tired or having little energy?" }, { text: "Poor appetite or overeating?" }, { text: "Feeling bad about yourself or that you are a failure?" }, { text: "Trouble concentrating on things, like reading or watching TV?" }, { text: "Moving/speaking slowly, or being fidgety/restless?" }, { text: "Thoughts that you would be better off dead, or hurting yourself?" } ];
        const optionsText = ["Not at all", "Several days", "More than half the days", "Nearly every day"];
        
        const counselorsData = [
            { name: "Dr. Anjali Sharma", specialty: "Anxiety & Stress Management", avatar: "AS", bio: "With over 10 years of experience, Dr. Sharma specializes in Cognitive Behavioral Therapy (CBT) for students facing academic pressure." },
            { name: "Mr. Rohan Verma", specialty: "Depression & Mood Disorders", avatar: "RV", bio: "Rohan uses a person-centered approach to help students navigate feelings of sadness and find motivation." },
            { name: "Ms. Priya Desai", specialty: "Relationship & Family Issues", avatar: "PD", bio: "Priya provides a safe space to discuss interpersonal challenges, helping students build healthier relationships." },
            { name: "Dr. Sameer Khan", specialty: "Career & Future Planning", avatar: "SK", bio: "Dr. Khan helps students manage the stress of career choices and develop a clear path forward." }
        ];

        const contentData = [
            { id: 'breathing', icon: 'bi-wind', title: '5-Minute Breathing Exercise', desc: 'Quick stress relief technique perfect for before exams or presentations.', meta1: '‚è± 5 minutes', meta2: '‚≠ê 4.8/5' },
            { id: 'anxiety', icon: 'bi-puzzle', title: 'Managing Exam Anxiety', desc: 'CBT-based techniques to overcome test anxiety and improve performance.', meta1: 'üìñ 10 minutes', meta2: '‚≠ê 4.9/5' },
            { id: 'sleep', icon: 'bi-moon-stars', title: 'Better Sleep for Students', desc: 'Evidence-based sleep hygiene tips for better rest and focus.', meta1: 'üìö 15 minutes', meta2: '‚≠ê 4.7/5' },
            { id: 'mindfulness', icon: 'bi-peace', title: 'Mindfulness for Students', desc: 'Learn to stay present and reduce overwhelm with daily mindfulness.', meta1: 'üéß 12 minutes', meta2: '‚≠ê 4.8/5' }
        ];
        
        // --- NAVIGATION ---
        function showScreen(screenName, event) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenName).classList.add('active');
            
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            if (event && event.target.closest('.nav-btn')) {
                event.target.closest('.nav-btn').classList.add('active');
            } else {
                const targetBtn = document.querySelector(`.nav-btn[onclick*="'${screenName}'"]`);
                if(targetBtn) targetBtn.classList.add('active');
            }

            if (screenName === 'assessment') updateQuestion();
            if (screenName === 'journal') renderJournalEntries();
        }

        // --- MODAL SYSTEM ---
        function showInfoModal(message, title = "Notification") {
            document.getElementById('modalTitle').innerText = title;
            document.getElementById('modalMessage').innerText = message;
            const modal = document.getElementById('customModal');
            modal.classList.remove('hidden');
            document.getElementById('modalOkButton').onclick = () => modal.classList.add('hidden');
        }

        function showPromptModal(title, message, callback) {
            document.getElementById('promptTitle').innerText = title;
            document.getElementById('promptMessage').innerText = message;
            const input = document.getElementById('promptInput');
            input.value = '';
            const promptModal = document.getElementById('customPrompt');
            promptModal.classList.remove('hidden');
            
            document.getElementById('promptOkButton').onclick = () => {
                promptModal.classList.add('hidden');
                callback(input.value);
            };
            document.getElementById('promptCancelButton').onclick = () => {
                promptModal.classList.add('hidden');
                callback(null);
            };
        }

        // --- ASSESSMENT LOGIC ---
        function selectOption(value, element) {
            assessmentAnswers[currentQuestion] = value;
            element.parentElement.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            document.getElementById('nextBtn').disabled = false;
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                updateQuestion();
            } else {
                completeAssessment();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                updateQuestion();
            }
        }

        function updateQuestion() {
            const card = document.getElementById('questionCard');
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;

            const optionsHTML = optionsText.map((option, index) => {
                const isSelected = assessmentAnswers[currentQuestion] === index ? 'selected' : '';
                return `<label class="option ${isSelected}" onclick="selectOption(${index}, this)">
                            <input type="radio" name="answer" value="${index}" class="option-radio" ${isSelected ? 'checked' : ''}>
                            ${option}
                        </label>`;
            }).join('');

            card.innerHTML = `<div class="question-number">Question ${currentQuestion + 1} of ${questions.length}</div>
                <div class="question-text">Over the last 2 weeks, how often have you been bothered by...<br><strong>${questions[currentQuestion].text}</strong></div>
                <div class="options-container">${optionsHTML}</div>
                <div class="assessment-nav">
                    <button class="nav-button" onclick="previousQuestion()" id="prevBtn" ${currentQuestion === 0 ? 'style="display:none;"' : ''}>Previous</button>
                    <button class="nav-button primary" onclick="nextQuestion()" id="nextBtn" ${assessmentAnswers[currentQuestion] === undefined ? 'disabled' : ''}>
                        ${currentQuestion === questions.length - 1 ? 'Complete' : 'Next'}
                    </button>
                </div>`;
        }

        function completeAssessment() {
            const totalScore = assessmentAnswers.reduce((sum, answer) => sum + (answer || 0), 0);
            let resultMessage = '';
            if (totalScore <= 4) resultMessage = 'Your responses suggest minimal depressive symptoms. Keep up the good self-care!';
            else if (totalScore <= 9) resultMessage = 'Your responses suggest mild depressive symptoms. Consider exploring our mindfulness resources.';
            else if (totalScore <= 14) resultMessage = 'Your responses suggest moderate depressive symptoms. Our community support and guided exercises may be helpful.';
            else resultMessage = 'Your responses suggest moderately severe depressive symptoms. We strongly recommend connecting with a professional for support.';
            
            document.getElementById('wellnessScore').innerText = `${totalScore}/27`;
            document.getElementById('wellnessMessage').innerText = resultMessage;

            showInfoModal(`Assessment Complete! ${resultMessage}`, "Your Results");
            showScreen('dashboard');
        }

        // --- DASHBOARD FEATURES ---
        function selectMood(element, mood) {
            document.querySelectorAll('.mood-option').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            const moodTexts = ['', 'Poor', 'Low', 'Okay', 'Good', 'Great'];
            showInfoModal(`Mood "${moodTexts[mood]}" logged successfully! Keep tracking to see your patterns over time.`);
        }

        // --- JOURNAL LOGIC ---
        function loadJournalEntries() {
            const storedEntries = localStorage.getItem('mindbridgeJournal');
            journalEntries = storedEntries ? JSON.parse(storedEntries) : [];
        }

        function saveJournalEntries() {
            localStorage.setItem('mindbridgeJournal', JSON.stringify(journalEntries));
        }

        function renderJournalEntries() {
            const container = document.getElementById('journalEntriesContainer');
            if (journalEntries.length === 0) {
                container.innerHTML = '<p>No journal entries yet. Click "New Entry" to start writing.</p>';
                return;
            }
            container.innerHTML = journalEntries.slice().reverse().map(entry => `
                <div class="journal-entry">
                    <div class="journal-date">${new Date(entry.date).toLocaleString()}</div>
                    <div class="journal-text">${entry.text}</div>
                </div>
            `).join('');
        }

        function addNewJournalEntry() {
            showPromptModal("New Journal Entry", "What's on your mind today? This is completely private and stored only in your browser.", (entryText) => {
                if (entryText && entryText.trim()) {
                    journalEntries.push({ text: entryText, date: new Date().toISOString() });
                    saveJournalEntries();
                    renderJournalEntries();
                    showInfoModal("Journal entry saved securely.");
                }
            });
        }
        
        // --- CONTENT & COMMUNITY ---
        function renderContentCards() {
            const grid = document.getElementById('contentGrid');
            grid.innerHTML = contentData.map(item => `
                <div class="content-card" onclick="openContent('${item.id}')">
                    <div class="content-thumbnail"><i class="bi ${item.icon}"></i></div>
                    <div class="content-info">
                        <h3 class="content-title">${item.title}</h3>
                        <p class="content-description">${item.desc}</p>
                        <div class="content-meta"><span>${item.meta1}</span><span>${item.meta2}</span></div>
                    </div>
                </div>
            `).join('');
        }

        function openContent(type) {
             const contentMap = {
                breathing: { title: "5-Minute Breathing Exercise", text: "1. Find a comfortable position and close your eyes.\n2. Inhale slowly through your nose for 4 counts.\n3. Hold your breath gently for 4 counts.\n4. Exhale slowly through your mouth for 6 counts.\n5. Repeat this cycle for 5 minutes." },
                anxiety: { title: "Managing Exam Anxiety", text: "Key strategies:\n‚Ä¢ Challenge negative thoughts with evidence\n‚Ä¢ Use positive self-talk and affirmations\n‚Ä¢ Take regular study breaks\n‚Ä¢ Practice progressive muscle relaxation" },
                sleep: { title: "Better Sleep for Students", text: "Evidence-based tips:\n‚Ä¢ Maintain consistent sleep/wake times\n‚Ä¢ Avoid screens 1 hour before bed\n‚Ä¢ Keep bedroom cool\n‚Ä¢ Limit caffeine after 2 PM" },
                mindfulness: { title: "Mindfulness for Students", text: "Getting started:\n‚Ä¢ Begin with just 5 minutes daily\n‚Ä¢ Focus on your breath without judging it\n‚Ä¢ Notice thoughts without judging them\n‚Ä¢ Gently return attention to your breath" }
            };
            const content = contentMap[type] || { title: "Not Found", text: "Content not available." };
            showInfoModal(content.text, content.title);
        }

        function createNewPost() {
            showPromptModal("New Anonymous Post", "Share your thoughts, experiences, or questions with the community. Be respectful and supportive.", (post) => {
                if (post && post.trim()) {
                    showInfoModal("Your post has been submitted. Thank you for contributing to our supportive community!");
                }
            });
        }
        
        // --- COUNSELORS LOGIC ---
        function renderCounselors() {
            const grid = document.getElementById('counselorsGrid');
            grid.innerHTML = counselorsData.map(c => `
                <div class="counselor-card">
                    <div class="counselor-avatar">${c.avatar}</div>
                    <div class="counselor-name">${c.name}</div>
                    <div class="counselor-specialty">${c.specialty}</div>
                    <p class="counselor-bio">${c.bio}</p>
                    <button class="action-btn" onclick="showInfoModal('This feature is coming soon. In a real application, this would open a booking or contact form.')">Connect</button>
                </div>
            `).join('');
        }

        // --- AI CHAT WIDGET ---
        function toggleChatWidget() {
            const widget = document.getElementById('chatWidget');
            widget.classList.toggle('active');
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;
            addMessage(message, 'user');
            input.value = '';
            showTypingIndicator();
            setTimeout(() => {
                removeTypingIndicator();
                addMessage(generateAIResponse(message), 'bot');
            }, 1500);
        }

        function addMessage(message, sender) {
            const container = document.getElementById('chatMessages');
            const msgDiv = document.createElement('div');
            msgDiv.className = `message ${sender}`;
            msgDiv.textContent = message;
            container.appendChild(msgDiv);
            container.scrollTop = container.scrollHeight;
        }

        function showTypingIndicator() {
            const container = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot typing-indicator';
            typingDiv.innerHTML = '<div class="loading-dots"><div></div><div></div><div></div></div>';
            container.appendChild(typingDiv);
            container.scrollTop = container.scrollHeight;
        }

        function removeTypingIndicator() {
            document.querySelector('.typing-indicator')?.remove();
        }

        function generateAIResponse(userMessage) {
            const msg = userMessage.toLowerCase();
            if (msg.includes('stress') || msg.includes('anxious')) return "I understand you're feeling stressed. That's very common for students. Would you like me to guide you through a quick breathing exercise, or would you prefer to explore stress management techniques from our resources section?";
            if (msg.includes('exam') || msg.includes('study')) return "Exam periods can be really challenging. Remember that some anxiety is normal. The key is managing it well. Would you like some specific study strategies or techniques for managing exam anxiety?";
            if (msg.includes('lonely') || msg.includes('friend')) return "Feeling lonely is a very common experience. Our community forum is a safe space where many students connect over similar experiences. Would you like to talk about ways to build connections?";
            if (msg.includes('sad') || msg.includes('depressed')) return "I hear that you're going through a difficult time. It takes courage to reach out. If these feelings persist or feel overwhelming, please consider speaking with a counselor. I'm here to listen in the meantime.";
            if (msg.includes('sleep') || msg.includes('tired')) return "Sleep issues are common among students. Good sleep is crucial for mental health. Would you like some evidence-based sleep hygiene tips from the resources section?";
            if (msg.includes('thank')) return "You're very welcome! I'm glad I could be helpful. Remember, taking care of your mental health is important. Is there anything else I can help with?";
            return "Thank you for sharing that with me. I'm here to listen and support you. Is there anything specific you'd like to talk about, or would you like me to suggest some resources?";
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') sendMessage();
        }

        // --- INITIALIZE ---
        document.addEventListener('DOMContentLoaded', () => {
            initializeTheme();
            updateQuestion(); // Pre-build the first question
            loadJournalEntries();
            renderContentCards();
            renderCounselors();
            renderJournalEntries(); // Initial render for the journal page
        });
    </script>
</body>
</html>
